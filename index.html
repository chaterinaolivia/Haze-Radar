<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">HazeRadar: 3-Day Smoke Prediction</title>

    <link rel="apple-touch-icon" sizes="180x180" href="ico/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="ico/favicon-16x16.png">
    <link rel="manifest" href="ico/site.webmanifest">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>

<body class="bg-gray-100 text-gray-900 flex-col min-h-screen overflow-y-auto">

    <div id="confirmation-modal"
        class="modal fixed inset-0 z-50 bg-opacity-70 flex items-center justify-center invisible opacity-0">
        <div class="modal-content-wrapper rounded-xl shadow-2xl p-6 w-11/12 md:w-1/3 border">
            <h3 id="modal-title" class="text-xl font-semibold mb-4" data-i18n="api_title_message">Message</h3>
            <p id="modal-text" class="text-base text-gray-700 dark:text-gray-300 mb-6">Modal body text here.</p>
            <div class="flex justify-end space-x-3">
                <button id="modal-close-btn" class="btn-primary" data-i18n="modal_close">
                    Close
                </button>
            </div>
        </div>
    </div>

    <header class="header sticky top-0 z-40 relative">
        <div class="header-container">

            <div class="header-placeholder"></div>

            <button id="dropdown-toggle" class="header-logo-toggle">
                <img src="images/HazeRadarLogo.png"
                    onerror="this.onerror=null; this.src='https://placehold.co/40x40/f3f4f6/06b6d4?text=HR'"
                    alt="HazeRadar Logo" class="logo-img">
                <span class="logo-text">
                    HazeRadar
                </span>
                <svg id="dropdown-icon" xmlns="http://www.w3.org/2000/svg" class="dropdown-icon" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path fill-rule="evenodd"
                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                        clip-rule="evenodd" />
                </svg>
            </button>

            <div class="header-controls-group">

                <button id="theme-toggle" class="control-btn">
                    <svg id="theme-icon-moon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                    </svg>
                    <svg id="theme-icon-sun" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                    </svg>
                </button>

                <button id="language-toggle" class="control-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3 5h12M3 7h12M9 3v18m3-6h-2m4 0h2m-6-4h2M4 19h16a2 2 0 002-2V7a2 2 0 00-2-2H4a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                </button>

                <nav id="language-dropdown-menu" class="lang-dropdown">
                    <a href="#" data-lang="en" class="dropdown-item border-b">English</a>
                    <a href="#" data-lang="id" class="dropdown-item border-b">Bahasa Indonesia</a>
                    <a href="#" data-lang="jv" class="dropdown-item">Javanese</a>
                </nav>
            </div>

        </div>

        <nav id="header-dropdown-menu" class="header-dropdown" class="header-dropdown-content">
            <div class="header-container-links">
                <a href="#haze-prediction-section" class="dropdown-link border-b text-center"
                    data-i18n="nav_haze_prediction">Haze Prediction</a>
                <a href="#haze-metrics-panel" class="dropdown-link border-b text-center" data-i18n="nav_key_matrix">Key
                    Matrix</a>
                <a href="#photo-uploader-panel" class="dropdown-link text-center"
                    data-i18n="nav_cloud_vision">CrowdVision</a>
            </div>
        </nav>
    </header>


    <main class="main-content">

        <div class="main-content-wrapper">

            <div id="haze-prediction-section" class="prediction-section">

                <div id="map-wrapper" class="map-wrapper order-1">
                    <div id="map" class="map-container"></div>

                    <div id="message-overlay" class="message-overlay">
                        <div class="message-box">
                            <div id="loading-spinner" class="loading-spinner"></div>
                            <p id="message-text" class="message-text">Loading map data...</p>
                        </div>
                    </div>

                    <p class="map-hint-text">
                        üñ±Ô∏è Drag peta untuk menggeser, klik kabupaten/kota untuk melihat analisis haze.
                    </p>
                </div>


                <div id="controls-panel-wrapper" class="controls-panel-wrapper order-2">

                    <h2 class="controls-header orange-header-text" data-i18n="timeline_header">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Prediction Timeline
                    </h2>

                    <div id="slider-region" class="slider-region">
                        <label for="notch-slider" class="slider-label">Current Time Selection: <span id="time-label"
                                class="time-label-value">12hr</span></label>
                        <div class="slider-wrapper">
                            <input type="range" min="1" max="7" value="4" step="1" id="notch-slider"
                                class="custom-slider">

                            <div class="time-markers-container">
                                <span data-i18n="time_now">Now</span>
                                <span data-i18n="time_4hr">4hr</span>
                                <span data-i18n="time_8hr">8hr</span>
                                <span data-i18n="time_12hr">12hr</span>
                                <span data-i18n="time_16hr">16hr</span>
                                <span data-i18n="time_20hr">20hr</span>
                                <span data-i18n="time_24hr">24hr</span>
                            </div>

                        </div>
                    </div>

                    <div class="affected-areas-container">
                        <h3 class="affected-areas-header" data-i18n="area_list_header">Affected Areas (Click to View)
                        </h3>
                        <div id="affected-areas-list-wrapper" class="affected-areas-list-wrapper">
                            <div id="affected-areas-list" class="affected-areas-list">
                            </div>
                            <p id="no-cards-message" class="no-cards-message hidden" data-i18n="area_list_empty">
                                No locations have been liked yet.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="haze-metrics-panel" class="metrics-panel">
                <h3 class="metrics-header orange-header-text" data-i18n="metrics_header">Haze Metrics</h3>

                <div id="square-cards-container" class="square-cards-container">
                    <div class="metric-card">
                        <p id="metric-current-haze" class="metric-value text-cyan">-</p>
                        <p class="metric-label" data-i18n="metric_current_status">Current Status</p>
                    </div>
                    <div class="metric-card">
                        <p id="metric-predicted-aqi" class="metric-value text-teal">-</p>
                        <p class="metric-label" data-i18n="metric_predicted_aqi">Predicted AQI</p>
                    </div>
                    <div class="metric-card">
                        <p id="metric-wind-speed" class="metric-value text-blue">-</p>
                        <p class="metric-label" data-i18n="metric_wind_speed">PM2.5</p>
                    </div>
                    <div class="metric-card">
                        <p id="metric-visibility" class="metric-value text-purple">-</p>
                        <p class="metric-label" data-i18n="metric_visibility">Temperature</p>
                    </div>

                </div>
            </div>

            <div class="side-by-side-panels-wrapper">

                <div id="photo-uploader-panel" class="uploader-panel">
                    <h3 class="uploader-header orange-header-text" data-i18n="cv_header">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                        </svg>
                        CrowdVision Insight
                    </h3>

                    <div class="panel-info-box">
                        <p class="panel-info-text" data-i18n="cv_explanation">
                            Use CrowdVision to see if you are in a safe environment.
                        </p>
                    </div>

                    <div id="drop-area" class="drop-area" onclick="fileElem.click()">
                        <input type="file" id="fileElem" multiple accept="image/*" class="hidden">

                        <svg xmlns="http://www.w3.org/2000/svg" class="upload-icon" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>

                        <p class="drop-area-text">
                            <span class="drop-area-link" id="file-browse-link" data-i18n="cv_browse_link">Click to
                                browse</span>
                            <span data-i18n="cv_drag_drop">or drag and drop</span>
                        </p>
                        <p class="drop-area-subtext" data-i18n="cv_file_type">PNG, JPG, or JPEG (Max 5MB per file)</p>

                        <div id="file-list" class="file-list"></div>
                    </div>

                    <!-- PREVIEW & RESULT DARI CLOUDVISION -->
                    <div class="cv-analysis-wrapper">
                        <img id="preview" class="cv-preview-image hidden" alt="CloudVision photo preview" />

                        <!-- tambahkan panel-info-box untuk pakai gaya card utama -->
                        <div id="result" class="panel-info-box cv-result-box hidden"></div>
                    </div>

                    <button id="upload-button" class="btn-secondary" disabled data-i18n="cv_button_analyze">
                        Analyze Photo with CrowdVision
                    </button>


                </div>

                <div id="haze-insight-panel" class="uploader-panel">
                    <h3 class="uploader-header orange-header-text" data-i18n="haze_insight_header">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                        Haze Insight
                    </h3>

                    <div class="panel-info-box">
                        <p class="panel-info-text" data-i18n="haze_insight_text">
                            Simulate your own smoke prediction.
                        </p>
                    </div>

                    <img src="https://placehold.co/400x224/f97316/ffffff?text=SIMULATION+MAP+PREVIEW"
                        onerror="this.onerror=null; this.src='https://placehold.co/400x224/f97316/ffffff?text=SIMULATION+MAP+PREVIEW'"
                        alt="Simulation Map Preview" class="simulation-img" />

                    <a href="simulation.html" class="btn-secondary text-center" data-i18n="haze_insight_button">
                        Start Simulation Tool
                    </a>
                </div>
            </div>
        </div>
    </main>

    <section id="team-info-section" class="team-info-section" style="background-image: url('/images/AboutUsBG.jpg');">

        <div class="team-info-overlay"></div>

        <div class="team-info-content-wrapper">
            <div class="team-info-text-box">
                <h2 class="team-info-header" data-i18n="footer_mission_header">Our Team & Mission</h2>
                <p class="team-info-text" data-i18n="footer_mission_text">
                    HazeRadar is built by a dedicated team focused on environmental technology and data science. We
                    strive to provide accurate, predictive modeling for smoke and haze events across Southeast Asia. Our
                    platform leverages advanced satellite data and machine learning (CrowdVision) to empower local
                    communities with critical air quality information, promoting public health and informed
                    decision-decision-making.
                </p>
                <div class="mt-8">
                    <a href="#haze-prediction-section" class="btn-primary" data-i18n="footer_back_to_map">
                        Back to Map
                    </a>
                </div>
            </div>
        </div>

    </section>

    <footer class="footer">
        <div class="footer-container">
            &copy; 2025 HazeRadar. All rights reserved.
        </div>
    </footer>

    <script src="script.js"></script>

</body>

</html>